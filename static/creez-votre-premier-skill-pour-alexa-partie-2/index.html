<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Créez votre premier skill pour Alexa : Partie 2, la mise en pratique</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <link rel="stylesheet" type="text/css" href="../assets/css/normalize.css?v=0fc218f299">
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=0fc218f299">

    

    <link rel="shortcut icon" href="../favicon.png" type="image/png">
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="Le Blog du Chabbat">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Créez votre premier skill pour Alexa : Partie 2, la mise en pratique">
    <meta property="og:description" content="Créez votre premier skill pour Alexa: Partie 2, la mise en pratique.">
    <meta property="og:url" content="http://jzarca01.github.io/static/creez-votre-premier-skill-pour-alexa-partie-2/">
    <meta property="og:image" content="http://jzarca01.github.io/content/images/2017/12/amazonecho_4-100599473-orig.jpg">
    <meta property="article:published_time" content="2017-12-21T18:30:00.000Z">
    <meta property="article:modified_time" content="2017-12-21T18:29:59.000Z">
    <meta property="article:tag" content="code">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Créez votre premier skill pour Alexa : Partie 2, la mise en pratique">
    <meta name="twitter:description" content="Créez votre premier skill pour Alexa: Partie 2, la mise en pratique.">
    <meta name="twitter:url" content="http://jzarca01.github.io/static/creez-votre-premier-skill-pour-alexa-partie-2/">
    <meta name="twitter:image" content="http://jzarca01.github.io/content/images/2017/12/amazonecho_4-100599473-orig-1.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Jérémie Zarca">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="code">
    <meta name="twitter:site" content="@Jeremie__">
    <meta name="twitter:creator" content="@Jeremie__">
    <meta property="og:image:width" content="1240">
    <meta property="og:image:height" content="823">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Le Blog du Chabbat",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2017/12/aborich_s.jpg",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Jérémie Zarca",
        "image": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2017/12/15230654_10154728107462801_7280102167862737793_n.png",
            "width": 400,
            "height": 400
        },
        "url": "http://localhost:2368/author/jeremie/",
        "sameAs": [
            "https://twitter.com/Jeremie__"
        ]
    },
    "headline": "Créez votre premier skill pour Alexa : Partie 2, la mise en pratique",
    "url": "http://localhost:2368/creez-votre-premier-skill-pour-alexa-partie-2/",
    "datePublished": "2017-12-21T18:30:00.000Z",
    "dateModified": "2017-12-21T18:29:59.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2017/12/amazonecho_4-100599473-orig.jpg",
        "width": 1240,
        "height": 823
    },
    "keywords": "code",
    "description": "Créez votre premier skill pour Alexa: Partie 2, la mise en pratique.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.js?v=0fc218f299"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "3ba5db887209"
});
</script>
    <meta name="generator" content="Ghost 1.19">
    <link rel="alternate" type="application/rss+xml" title="Le Blog du Chabbat" href="../rss/index.html">
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111460280-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111460280-1');
</script>
</head>
<body class="post-template tag-code">

    <header id="site-head">
        <a id="blog-logo" href="../"><div class="bloglogo" style="background: url(../content/images/2017/12/aborich_s.jpg)"></div></a>
        <h1 class="blog-title"><a href="../">Le Blog du Chabbat</a></h1>
        <h2 class="blog-description">Fooding et coding du vendredi soir au samedi soir</h2>        <nav class="menu" role="nav">
    <ul>
      <li><a href="../tag/food/">Fooding</a></li>
      <li><a href="../tag/code/">Coding</a></li>
      <li><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=8MBQYFGJXL4XE" class="button">Offre-moi un kebab</a></li>
    </ul>
</nav>    </header>

    
<main class="content" role="main">

    <article class="post tag-code">


        <header>
        <!--<div class="post-meta tags">Posté dans <a href="/tag/code/">code</a></div>-->
        <h1 class="post-title">Créez votre premier skill pour Alexa : Partie 2, la mise en pratique</h1>
        <div class="post-meta"><time class="post-date" datetime="2017-12-21T19:30:00.00Z">...</time></div>
        </header>

        <section class="post-content">
            <div class="kg-card-markdown"><p><em>Cet article est paru en premier lieu sur le blog de JS-Republic: <a href="http://blog.js-republic.com/alexa-creer-votre-skill-partie-2/">http://blog.js-republic.com/alexa-creer-votre-skill-partie-2/</a></em></p>
<p>Dans cette partie nous allons voir comment créer votre premier skill pour connaître la météo dans n’importe quelle ville d’Europe et à la fin de cet article vous pourrez repartir avec, c’est promis.</p>
<p>Maintenant que vous avez assimilé tous les concepts importants associés à la création de skills pour Alexa, nous pouvons enfin rentrer dans le vif du sujet. Si ce n’est pas le cas, n’hésitez surtout pas à relire la première partie de cet article.</p>
<h3 id="lesprrequispourcettepartie">Les pré-requis pour cette partie :</h3>
<p>– Un compte sur le portail développeur Amazon (<a href="https://developer.amazon.com/edw/home.html#/">https://developer.amazon.com/edw/home.html#/</a>)<br>
– Votre environnement de test<br>
– Node 6 et npm installés (<a href="https://nodejs.org/">https://nodejs.org/</a>)<br>
– Les concepts de base de ES6<br>
– Votre éditeur de code favori</p>
<h2 id="linstallationdeslibrairies">L’INSTALLATION DES LIBRAIRIES</h2>
<p>Ici, on fait au plus simple.</p>
<p><img src="https://i2.wp.com/media.giphy.com/media/wVJYDdgvARMJy/giphy.gif?resize=388%2C220&amp;ssl=1" alt=""></p>
<pre><code>mkdir MyAwesomeSkill
cd MyAwesomeSkill
npm init
 
npm install —save alexa-skill-kit yahoo-weather
</code></pre>
<p>Une petite explication s’impose: Alexa-skill-kit propose une première couche d’abstraction pour la librairie officielle d’Amazon, afin de rendre le développement le plus simple et le plus intuitif possible.<br>
Yahoo-weather, quant à lui, est tout simplement un wrapper pour l’API Météo de Yahoo</p>
<p>Pour plus d’informations, vous pouvez consulter les repo <a href="https://github.com/stojanovic/alexa-skill-kit">https://github.com/stojanovic/alexa-skill-kit</a> et <a href="https://github.com/mamal72/node-yahoo-weather">https://github.com/mamal72/node-yahoo-weather</a></p>
<h2 id="lecode">LE CODE</h2>
<p><strong>INDEX.JS</strong></p>
<pre><code>const alexaSkillKit = require('alexa-skill-kit')
const intent = require('./lib/Intents')
 
exports.handler = function(event, context) {
    alexaSkillKit(event, context, parsedMessage =&gt; {
        // console.log(JSON.stringify(parsedMessage))
        return intent(parsedMessage)
    })
}
</code></pre>
<p><strong>LIB/INTENTS.JS</strong></p>
<pre><code>const weather = require('yahoo-weather')
 
module.exports = function(parsedMessage) {  
    if (parsedMessage.type === 'IntentRequest' &amp;&amp; parsedMessage.intent.name === 'GetWeather') {
        return weather(parsedMessage.intent.slots.Location.value)
          .then(info =&gt; info.item)
          .then(item =&gt; item.condition)
          .then(condition =&gt; {
            //console.log('info', condition)
            return `It is currently ${condition.text} with ${condition.temp} degrees in ${parsedMessage.intent.slots.Location.value}`
          })
          .catch(() =&gt; {
            return `Hm, I can't find any weather data for ${parsedMessage.intent.slots.Location.value}.`
          })
}
</code></pre>
<p>Vous vous souvenez du concept d’Intent, de Slots et d’Utterances, n’est-ce pas ? Si ce n’est pas le cas, je vous invite à relire les sections correspondantes dans la première partie de cet article.</p>
<p>Dans l’Intent Schema, nous avions défini la fonction GetWeather qui prenait comme Slot un objet Location de type AMAZON.EUROPE_CITY</p>
<pre><code>{
    "intents": [
        {
            "intent": "GetWeather",
            "slots": [
                {
                    "name: "Location",
                    "type": "AMAZON.EUROPE_CITY"
                }
            ]
        }
    ]
}
</code></pre>
<p>Et dans le fichier de Sample Utterances, nous décrivions différentes manières d’appeler cette fonction à partir d’Alexa.</p>
<pre><code>GetWeather what is the weather in {Location}
GetWeather weather in {Location}
</code></pre>
<p>Ainsi, lorsque le skill est appelé par l’utilisateur, il saura quelle fonction exécuter.<br>
Lorsque l’utilisateur dira <strong>« Alexa, ask My Awesome Skill for the weather in Paris »</strong>, notre skill renverra <strong>« It is currently Sunny with 20 degrees in Paris »</strong>.</p>
<p><img src="https://media.giphy.com/media/g3MjnaLkNl19C/giphy.gif" alt=""></p>
<p>Il ne vous reste plus qu’à zipper votre projet pour passer à la suite.</p>
<p>Petite astuce pour les utilisateurs de Mac et de Linux: à partir de votre terminal, depuis le répertoire du projet, entrez la commande suivante pour zipper le projet.</p>
<pre><code>zip -r ../MyAwesomeSkill.zip *
</code></pre>
<p>Le code est également disponible à cette adresse : <a href="https://github.com/jzarca01/alexaskill-jsrepublic">https://github.com/jzarca01/alexaskill-jsrepublic</a></p>
<h2 id="envoyezleskillsurlesserveursamazon">ENVOYEZ LE SKILL SUR LES SERVEURS AMAZON</h2>
<p>Les ressources créées dans Amazon Web Services sont chacune identifiées de façon unique par un Amazon Resource Name (ARN).<br>
Dans cette partie, nous allons créer une fonction Lambda sur les serveurs d’Amazon et y envoyer notre projet compressé.</p>
<p>Munissez vous de vos identifiants Amazon Developer et rendez vous à l’adresse suivante : <a href="https://console.aws.amazon.com/?nc2=h_m_mc">https://console.aws.amazon.com/?nc2=h_m_mc</a><br>
Puis cliquez en haut à gauche sur « Services » puis « Lambda »</p>
<p>￼<img src="https://i1.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/1.png?w=629" alt="alt text" title="Alexa AWS Lambda"></p>
<p>Il ne vous reste plus qu’a cliquer sur « Créer une fonction Lambda » puis sélectionner « Fonction vide ».</p>
<p>Sélectionnez « Kit Alexa Skills » parmi la liste des déclencheurs.</p>
<p><img src="https://i2.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/2.png?w=912" alt="alt text" title="Alexa Kit AVS Skill">￼</p>
<p>C’est dans l’onglet « Configurer une fonction » que notre code sera chargé sur les serveurs Amazon.<br>
Renseignez un nom et choisissez votre environnement d’exécution. Ici, choisissez « NodeJS 6.10 » puisque notre code utilise la syntaxe ES6.<br>
Le nom n’a pas d’importance, il ne sera pas réutilisé plus tard.</p>
<p>Puis dans la section suivante, choisissez dans la liste déroulante « Type d’entrée de code » l’option « Charger un fichier ZIP ».</p>
<p><img src="https://i2.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/3.png?w=493" alt="alt text" title="Alexa ZIP">￼</p>
<p><img src="https://i2.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/4.png?w=933" alt="alt text" title="Alexa ZIP Recap"></p>
<p>￼Enfin, après la page de récapitulatif, il ne vous reste plus qu’a cliquer sur « Créer la fonction » pour passer à l’étape suivante.</p>
<p>Oh et une dernière chose, notez l’adresse ARN de votre fonction, vous en aurez besoin pour la prochaine partie de cette article.</p>
<h2 id="enregistrezvotreskillauprsdamazon">ENREGISTREZ VOTRE SKILL AUPRÈS D’AMAZON</h2>
<p>Munissez vous de vos identifiants Amazon Developer et rendez vous à l’adresse suivante : <a href="https://developer.amazon.com/edw/home.html#/skills">https://developer.amazon.com/edw/home.html#/skills</a><br>
Si jusque là vous n’aviez pas crée votre compte, c’est le moment.</p>
<p><img src="https://i1.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/5.png?w=1202" alt="alt text" title="Alexa Developer Console"></p>
<p>Puis cliquez sur le bouton « Add a New Skill » en haut à droite de l’écran.</p>
<p>A partir d’ici, vous êtes guidés tout au long du processus pour fournir toutes les informations nécessaires à la configuration de votre nouveau skill.</p>
<p><img src="https://i2.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/6.png?w=642" alt="alt text" title="Alexa Skill Information">￼</p>
<p>Dans la section « Interaction Model », vous retrouvez le « Intent Schema » ainsi que les « Sample Utterances » dont nous ne cessons de parler depuis la première partie de cet article.￼Alexa Intent Schema</p>
<p><img src="https://i2.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/8.png?w=830" alt="alt text" title="Alexa Sample Utterances"></p>
<p>Il est tout à fait possible de créer un skill multilingue, mais nous n’en parlerons pas dans cet article. Si toutefois le sujet vous intéresse, voici le lien vers la documentation officielle (<a href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/developing-skills-in-multiple-languages">https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/developing-skills-in-multiple-languages</a>)</p>
<p>Enfin, dans la section « Configuration », il vous est demandé si votre skill est hébergé sur les serveurs Amazon ou bien sur un serveur privé. Ici, nous avons cherché à aller au plus simple, chez Amazon. C’est là que l’adresse ARN que vous avez notée précédemment servira. Elle indique l’adresse où votre skill est exécuté.</p>
<p>￼<img src="https://i1.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/9.png?w=706" alt="alt text" title="Alexa Global Fields ARN"></p>
<p>Si tout s’est bien passé, le résultat du simulateur correspondra à ce que nous attendions.</p>
<p>￼<img src="https://i1.wp.com/blog.js-republic.com/wp-content/uploads/2017/04/10.png?w=817" alt="alt text" title="Alexa Service Simulator"></p>
<p>Une dernière étape pour profiter pleinement de votre skill durement codé, l’activation.<br>
Comme expliqué dans la première partie de cet article, les skills ne sont pas téléchargés sur votre device. Ils sont simplement activés depuis votre dashboard.<br>
Par défaut, votre skill est activé, mais si ce n’était pas le cas, il faudrait vous connecter via l’application mobile Alexa pour l’activer depuis la section ‘Skills’.</p>
<p>Et tant qu’ils ne sont pas soumis pour une validation par Amazon, seulement le compte développeur y a accès.<br>
En attendant, libérez votre créativité pour créer des skills toujours plus merveilleux.</p>
<p><img src="https://i1.wp.com/media.giphy.com/media/106holZERgWSFG/giphy.gif?resize=413%2C234&amp;ssl=1" alt=""></p>
<p>Merci de m’avoir lu, et si l’article vous a plu, n’hésitez pas à le partager sur les réseaux sociaux.</p>
</div>
        </section>

        <section class="share">
            <p class="info prompt">Partager cet article</p>
            <div class="share_links">
                <a href="http://twitter.com/share?text=Cr%C3%A9ez%20votre%20premier%20skill%20pour%20Alexa%20:%20Partie%202,%20la%20mise%20en%20pratique&amp;url=http://jzarca01.github.io/static/creez-votre-premier-skill-pour-alexa-partie-2/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="fa fa-2x fa-fw fa-twitter"></i> <span class="hidden">Twitter</span>
                </a>
                <a href="https://www.facebook.com/sharer/sharer.php?u=http://jzarca01.github.io/static/creez-votre-premier-skill-pour-alexa-partie-2/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="fa fa-2x fa-fw fa-facebook-square"></i> <span class="hidden">Facebook</span>
                </a>
                <a href="https://plus.google.com/share?url=http://jzarca01.github.io/static/creez-votre-premier-skill-pour-alexa-partie-2/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="fa fa-2x fa-fw fa-google-plus-square"></i> <span class="hidden">Google+</span>
                </a>
            </div>
        </section>

        <footer class="post-footer">

            <section class="author">
                <div class="authorimage" style="background: url(../content/images/2017/12/15230654_10154728107462801_7280102167862737793_n.png)"></div>
                <p class="attr">Par</p>
                <h4><a href="index.html">Jérémie Zarca</a></h4>
                <p class="bio"></p>
            </section>

        </footer>


        <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = 'http://localhost:2368/creez-votre-premier-skill-pour-alexa-partie-2/';  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = '/creez-votre-premier-skill-pour-alexa-partie-2/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://le-blog-du-chabbat.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
    </article>

</main>


    <footer class="site-footer">
        <div class="inner">
            <section class="copyright">© 2017 <a href="../">Le Blog du Chabbat</a>. Tous droits réservés.</section>
        </div>
    </footer>

    

    <!-- Load jQuery if is not already loaded. -->
    <!-- After Ghost 0.7, on all new blogs jquery is not loaded by default. -->
    <script type="text/javascript">
        if (typeof jQuery == 'undefined') {
            document.write('<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.0.min.js"></'+'script>');
        }
    </script>
    <script type="text/javascript" src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=0fc218f299"></script>

</body>
